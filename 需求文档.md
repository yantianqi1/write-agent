# 长篇小说智能创作 Agent 开发方案

## 📌 项目概述
开发一个能够自动创作长篇小说的智能 Agent 系统。用户只需输入一句话或一段设定，系统即可自动完成从素材收集到全文生成的完整创作流程。

**目标愿景：** 实现人机协作的高质量长篇小说创作，降低创作门槛的同时保证内容一致性和文学质量。

## 🎯 核心功能需求

### 输入方式
- 一句话灵感输入（快速启动模式）
- 详细设定文档输入（精细控制模式）
- 字数需求指定（如：10万字、50万字等）
- 参考作品风格指定（可选）

### 素材收集
- 检索自身数据库（本地知识库）
- 联网搜索（实时信息获取）
- 多源内容整合与去重
- 素材可信度评估与标注

### 创作流程（循环迭代）
```
大纲生成 → 篇章细化 → 章节划分 → 用户审核
         ↓ 修改意见   ↓ 确认通过
         └───────────┘
                        ↓
                   正文生成 → 章节审核 → 修改调整
                                              ↓
                                         完成输出
```

## 🔧 核心技术难点：长篇记忆问题

**关键问题：** 如何让后续章节保持对前文的记忆，确保人物、情节、设定的一致性？

### 解决方案架构

#### 1. 分层记忆系统（Hierarchical Memory）

| 记忆层级 | 存储内容 | 更新频率 | 检索策略 |
|---------|---------|---------|---------|
| 全局记忆 | 世界观设定、核心主题、整体大纲 | 低频更新 | 每章必载 |
| 角色记忆库 | 人物档案、性格特征、关系图谱、成长轨迹 | 每章节更新 | 按出场角色检索 |
| 情节记忆 | 已发生事件、伏笔列表、未解决冲突 | 每章节更新 | 相关性检索 |
| 近期上下文 | 最近2-3章的详细内容 | 滑动窗口 | 全量加载 |
| 风格记忆 | 叙事风格、常用表达、节奏模式 | 篇章级更新 | 采样参考 |

#### 2. 技术实现方案

**方案 A：向量数据库 + RAG（推荐入门）**
- 使用向量数据库（Pinecone / Milvus / Chroma / Weaviate）
- 将已完成章节切块后进行 Embedding 存储
- 生成新章节时，检索相关前文片段作为上下文
- 实现语义级别的"记忆回溯"
- 支持多维度检索（人物、事件、地点、时间）

优点：实现简单、语义理解强
缺点：结构化关系表达较弱

**方案 B：结构化知识图谱**
- 构建小说知识图谱（Neo4j / 自建）
- 节点类型：人物、地点、事件、物品、时间点、概念设定
- 边关系：人物关系、因果关系、时间顺序、从属关系
- 查询知识图谱获取结构化记忆
- 支持复杂关系推理

优点：关系表达精确、支持推理
缺点：构建维护成本高、语义灵活性差

**方案 C：混合方案（最优，生产推荐）**
（内容被截断，请继续补充）
